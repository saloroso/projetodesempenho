    

// -- SCRIPT QUE DEVE SER COLOCADO NO HEAD DE CADA PÁGINA PARA ACESSAR AS VARIÁVEIS GLOBAIS --------------------- // 
/* 
  <script type="text/javascript"> // SCRIPT DA PRÓPRIA PÁGINA. //  
    
    listadeadms = new Array(); // Global da própria página.
    usuariologado = "";
 
    function Pegar_valores(){
      
          var listadeadms_temp = sessionStorage.getItem("BANCO_ADMS"); // Recupera o Banco de Adms em session storage.
          listadeadms_temp = JSON.parse(listadeadms_temp); // Converte string para objeto.
      
          var usuariologado_temp = sessionStorage.getItem("USUARIO_LOGADO"); // Recupera o Usuário logado em session storage.
          usuariologado_temp = JSON.parse(usuariologado_temp); // Converte string para um objeto.
      
          // Criar o Banco de Adms se ele não existir.
          if (listadeadms_temp == null){ 
          listadeadms_temp = new Array();
          sessionStorage.setItem("BANCO_ADMS", JSON.stringify(listadeadms_temp));} 
      
          // Criar o Usuário Logado se ele não existir.
          if (usuariologado_temp == null){ 
          usuariologado_temp = "";
          sessionStorage.setItem("USUARIO_LOGADO", JSON.stringify(usuariologado_temp));} 
 
          usuariologado = usuariologado_temp;
          listadeadms = listadeadms_temp;
    }
    
  window.onload = Pegar_valores(); // Carregar automaticamente a função.
    
  </script>
*/


 // -- SCRIPT PARA SALVAR ATUALIZAÇÕES DO BANCO DE ADMS NO SESSION STORAGE --------------------- // 
    function Salvar_Bancodeadms(listadeadms){
          sessionStorage.setItem("BANCO_ADMS", JSON.stringify(listadeadms));
          return true;}          

 // -- SCRIPT PARA SALVAR ATUALIZAÇÕES DO USUÁRIO LOGADO NO SESSION STORAGE --------------------- // 
    function Salvar_Usuariologado(usuariologado){
          sessionStorage.setItem("BANCO_ADMS", JSON.stringify(usuariologado));
          return true;}        

 // -- FUNÇÃO PARA CRIAR NOVO ADMINISTRADOR/LÍDER, SEJA ELE MASTER OU NÃO --------------------- // 
   function Criar_adm(nome,email,senha){ 
       alert ("Entrei na função cadastrar adm/líder.");
        this.nome = nome;
        this.email = email;
        this.senha = senha;
        this.membros = new Array();
        this.notadaequipe = function(){ 
        }
    }

/* 
 // -- FUNÇÃO PARA CRIAR NOVO ADMINISTRADOR/LÍDER, SEJA ELE MASTER OU NÃO --------------------- // 
    function Criar_respondente(nome, codigo, lider, desempenho, auto, comu, flex, foco, rel, ini, geral,respondido){
          this.nome = nome;
          this.codigo = codigo;
          this.lider = lider;
          this.desempenho = desempenho;
          this.media_auto = auto;
          this.media_comu = comu;
          this.media_flex = flex;
          this.media_foco = foco;
          this.media_rel = rel;
          this.media_ini = ini;
          this.media_geral = geral;
          this.respondido = respondido; // 1 é respondido e 0 é não respondido.     
    }
*/

  // -- VERIFICAR SE O ADM JÁ ESTÁ CADASTRADO NO BANCO DE DADOS --------------------- // 
     function Verifica_Adm(nome1,email1,senha1,lista){ 
          alert ("Entrou na função Verificar_Adm 2.");
          var lista2 = lista;     
          var tamanho6 = lista2.length;   
          alert ("Quantidade de Adms cadastrados: " + tamanho6);
          for (r=0;r<tamanho6;r++){
                if ((nome1=="") || (email1=="") || (senha1=="")){      
                    alert ("Um ou mais campos estão vazios, favor preenchê-lo(s).");
                    r=tamanho6;
                      return false;
                } else if ((lista2[r].nome==nome1) || (lista2[r].email==email1)){
                           alert ("Dados de acesso já estão em uso.");
                      return false;}
          }            
            return true;
      }

  // -- FUNÇÃO PARA CADASTRAR ADM NO BANCO DE DADOS --------------------- // 
    function Cadastrar_Adm(lista1){ 
          alert ("Entrou na função Cadastrar_Adm 7.");     
          var lista = lista1;  
          var lista = sessionStorage.getItem("BANCO_ADMS");
          lista = JSON.parse(lista);  
          var nome1 = document.getElementById("Nome").value;
          var email1 = document.getElementById("E-mail").value;
          var senha1 = document.getElementById("Senha").value;      
          alert ("Nome: " + nome1);
          alert ("Email: " + email1);
          alert ("Senha: " + senha1);
          var verificar = Verifica_Adm(nome1,email1,senha1,lista);
          if (verificar==true){
               var novo_user = new Criar_adm(nome1,email1,senha1);
               lista.push(novo_user);
               alert ("Usuário cadastrado com sucesso.");
               Salvar_Bancodeadms(lista);  
          } else {
              alert ("Não é possível prosseguir com estes dados.");
          }
    }
    
  // -- FUNÇÃO PARA LOGAR NO BANCO DE DADOS --------------------- // 
    function Logar_Adm(lista1){ 
        var lista = lista1;
        alert ("Entrou na função Logar_Adm 9.");            
        var emailadm = document.getElementById("E-mail").value;
        var senhaadm = document.getElementById("Senha").value;        
        var tamanho = lista.length;
          alert ("Quantidade de Adms cadastrados: " + tamanho);
          alert ("Email: " + emailadm);
          alert ("Senha: " + senhaadm);
        for (i=0;i<tamanho;i++){            
            if ((lista[i].email==emailadm) && (lista[i].senha==senhaadm)) {
                var usuariologado = lista[i].nome;
                Salvar_Usuariologado(usuariologado);
                alert ("Login realizado com sucesso.");
                window.location.href="https://saloroso.github.io/projetodesempenho/formulario"; 
                return true;
            } 
        }
        alert("Campos vazios ou incorretos, tente novamente.");
    } 

   // -- FUNÇÃO PARA RECEBER VALORES DO FORMULÁRIO E CALCULAR --------------------- // 
    function Processar_Formulario(lista1){   
        alert ("Entrou na função Processar_Formulario 6.");     
        var lista = lista1;  
        var lista = sessionStorage.getItem("BANCO_ADMS");
        lista = JSON.parse(lista);       
        var codigodorespondente = document.getElementById("codigodorespondente").value;
        var nomedorespondente = document.getElementById("nomedorespondente").value;    
        var liderdorespondente = document.getElementById("liderdorespondente").value;
        var auto1 = document.getElementById("auto1").value;    
        var auto2 = document.getElementById("auto2").value;
        var auto3 = document.getElementById("auto3").value;   
        var comu1 = document.getElementById("comu1").value;  
        var comu2 = document.getElementById("comu2").value; 
        var comu3 = document.getElementById("comu3").value; 
        var disc1 = document.getElementById("disc1").value; 
        var disc2 = document.getElementById("disc2").value; 
        var disc3 = document.getElementById("disc3").value; 
        var flex1 = document.getElementById("flex1").value;  
        var flex2 = document.getElementById("flex2").value; 
        var flex3 = document.getElementById("flex3").value; 
        var foco1 = document.getElementById("foco1").value; 
        var foco2 = document.getElementById("foco2").value; 
        var foco3 = document.getElementById("foco3").value; 
        var rel1 = document.getElementById("rel1").value;  
        var rel2 = document.getElementById("rel2").value; 
        var rel3 = document.getElementById("rel3").value; 
        var ini1 = document.getElementById("ini1").value; 
        var ini2 = document.getElementById("ini2").value; 
        var ini3 = document.getElementById("ini3").value;      
        if ((auto1<0) || (auto1>100) || (auto2<0) || (auto2>100) || (auto3<0) || (auto3>100)
            || (comu1<0) || (comu1>100) || (comu2<0) || (comu2>100) || (comu3<0) || (comu3>100)
            || (disc1<0) || (disc1>100) || (disc2<0) || (disc2>100) || (disc3<0) || (disc3>100)
            || (flex1<0) || (flex1>100) || (flex2<0) || (flex2>100) || (flex3<0) || (flex3>100)
            || (foco1<0) || (foco1>100) || (foco2<0) || (foco2>100) || (foco3<0) || (foco3>100)
            || (rel1<0) || (rel1>100) || (rel2<0) || (rel2>100) || (rel3<0) || (rel3>100)
            || (ini1<0) || (ini1>100) || (ini2<0) || (ini2>100) || (ini3<0) || (ini3>100)
           ) { alert ("Alguma(s) da(s) nota(s) digitadas é menor que zero ou maior que cem, favor adequá-los");
        } else { 
              auto1 = parseInt(auto1,10);
              auto2 = parseInt(auto2,10);
              auto3 = parseInt(auto3,10);
              comu1 = parseInt(comu1,10);
              comu2 = parseInt(comu2,10);
              comu3 = parseInt(comu3,10);
              disc1 = parseInt(disc1,10);
              disc2 = parseInt(disc2,10);
              disc3 = parseInt(disc3,10);
              flex1 = parseInt(flex1,10);
              flex2 = parseInt(flex2,10);
              flex3 = parseInt(flex3,10);
              foco1 = parseInt(foco1,10);
              foco2 = parseInt(foco2,10);
              foco3 = parseInt(foco3,10);
              rel1 = parseInt(rel1,10);
              rel2 = parseInt(rel2,10);
              rel3 = parseInt(rel3,10);
              ini1 = parseInt(ini1,10);
              ini2 = parseInt(ini2,10);
              ini3 = parseInt(ini3,10);                    
              var media_auto1 = (auto1 + auto2 + auto3)/3;
              var media_comu1 = (comu1 + comu2 + comu3)/3;
              var media_disc1 = (disc1 + disc2 + disc3)/3;
              var media_flex1 = (flex1 + flex2 + flex3)/3;
              var media_foco1 = (foco1 + foco2 + foco3)/3;
              var media_rel1 = (rel1 + rel2 + rel3)/3;
              var media_ini1 = (ini1 + ini2 + ini3)/3; 
              var media_geral1 = 0;
              media_geral1 = (media_auto + media_comu + media_disc + media_flex + media_foco + media_rel + media_ini)/7;
              var encontrado = Verificar_Formulario(codigodorespondente,nomedorespondente,liderdorespondente,lista);
              alert ("Resultado do if é: " + encontrado);
              if (encontrado != undefined){
                  alert ("Encontrado.");
                  encontrado.media_auto = media_auto1;
                  encontrado.media_comu = media_comu1;
                  encontrado.media_disc = media_disc1;
                  encontrado.media_flex = media_flex1;
                  encontrado.media_foco = media_foco1;
                  encontrado.media_rel = media_rel1;
                  encontrado.media_ini = media_ini1;
                  encontrado.media_geral = media_geral1;
                  encontrado.respondido = 1;
                  Salvar_Bancodeadms(lista); 
              } else {
                  alert ("Código do acesso, nome do respondente ou nome do líder estão incorretos, favor adequá-los.");
              }
        }
    }
                          

function Verificar_Formulario(codigo1,nome1,lider1,lista1){
    alert ("Entrou na função Verificar_Formulario 1.");
    var lista3 = lista1;     
    var tamanho7 = lista3.length;   
    alert ("Quantidade de Adms cadastrados: " + tamanho7);
    for (z=0;z<tamanho7;z++){
        if (lista3[z].nome == lider1){
           var tamanhomembros = lista3[z].membros.length;
            for (y=0;y<tamanhomembros;y++){
                if ((lista3[z].membros[y].nome==nome1) && (lista3[z].membros[y].codigo==codigo1)){
                    return lista3[z].membros[y];
                    }
            }
        }
    } 
    return undefined;
}







